value;
            const rawData = localStorage.getItem('lesson-' + date);
            
            if (rawData) {
                const data = JSON.parse(rawData);
                document.getElementById('ytInput').value = data.yt || "";
                document.getElementById('lyricsInput').value = data.lyrics || "";
                document.getElementById('wordsInput').value = data.words || "";
                document.getElementById('grammarInput').value = data.grammar || "";

                // 處理 YouTube 內嵌
                const ytID = getYoutubeID(data.yt);
                if (ytID) {
                    document.getElementById('videoContainer').innerHTML = <iframe class="w-full h-full" src="https://www.youtube.com/embed/${ytID}" frameborder="0" allowfullscreen></iframe>;
                } else {
                    document.getElementById('videoContainer').innerHTML = <p class="text-sm">影片連結無效</p>;
                }

                // 處理文字顯示 (保留換行)
                document.getElementById('card1').innerHTML = (data.lyrics || "尚未輸入歌詞").replace(/\n/g, '<br>');
                document.getElementById('card2').innerHTML = (data.words || "尚未輸入單字").replace(/\n/g, '<br>');
                document.getElementById('card3').innerHTML = (data.grammar || "尚未輸入文法").replace(/\n/g, '<br>');
            } else {
                // 清空
                ["ytInput", "lyricsInput", "wordsInput", "grammarInput"].forEach(id => document.getElementById(id).value = "");
                document.getElementById('videoContainer').innerHTML = <p>當天沒有課程內容</p>;
                document.getElementById('card1').innerHTML = "請點擊上方編輯區開始新課程";
                document.getElementById('card2').innerHTML = "";
                document.getElementById('card3').innerHTML = "";
            }
        }

        // 初始化：設為今天日期
        document.getElementById('datePicker').valueAsDate = new Date();
        loadLesson();
    </script>
</body>
</html>